<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/Home/HomeComponent.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/Home/HomeComponent.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import "./Home.scss";
import Start from "./HomeComponents/Start/Start";
import Feature from "./HomeComponents/Feature/Feature";
import Popular from "./HomeComponents/Popular/Popular";
import Header from "../Header/Header";
import deliveryImg from "../../assets/delivery.svg";
import qualityImg from "../../assets/quality.svg";
import safeguardImg from "../../assets/safeguard.svg";

import { useEffect, useRef, useState } from "react";
import { ModalContext } from "../../App";
import { useContext } from "react";

/**
 * Компонент HelloContent, приветственная страница
 * @module HelloComponent
 * @returns {React.ReactElement} Элемент React.
 */
export default function HelloComponent() {
  /**
   * Реализация скролла по секциям на главной странице
   */
  const { modal } = useContext(ModalContext);
  const sectionsRef = useRef([]);
  const [sections, setSections] = useState([]);
  const [currentSectionIndex, setCurrentSectionIndex] = useState(0);
  const currentIndex = useRef(0);
  let isScroll = false;
  const handleWheel = (event) => {
    if (!isScroll) {
      isScroll = true;
      window.removeEventListener("wheel", handleWheel);
      event.preventDefault();

      const delta = event.deltaY;

      if (delta > 0) {
        if (currentIndex.current &lt; sectionsRef.current.length - 1) {
          const nextSectionIndex = currentIndex.current + 1;
          sectionsRef.current.forEach((section, index) => {
            if (index >= nextSectionIndex) {
              section.style.transform = `translateY(${
                nextSectionIndex * -100
              }%) ${
                index === currentIndex.current + 1 ? "scaleY(1)" : "scaleY(0.5)"
              }`;
            }
          });
          setCurrentSectionIndex(nextSectionIndex);
          currentIndex.current += 1;
        }
      } else {
        // scroll up
        if (currentIndex.current > 0) {
          const prevSectionIndex = currentIndex.current - 1;
          sectionsRef.current.forEach((section, index) => {
            if (index > prevSectionIndex) {
              if (index > 0) {
                section.style.transform = `translateY(${
                  prevSectionIndex * -100
                }%) ${
                  index === currentIndex.current + 1
                    ? "scaleY(1)"
                    : "scaleY(0.5)"
                }`;
              }
            }
          });
          setCurrentSectionIndex(prevSectionIndex);
          currentIndex.current -= 1;
        }
      }

      setTimeout(() => {
        isScroll = false;
        window.addEventListener("wheel", handleWheel);
      }, 800);
    }
  };
  const changeSection = (buttonIndex) => {
    sectionsRef.current.forEach((section, index) => {
      if (index &lt;= buttonIndex) {
        section.style.transform = `translateY(${index * -100}%)`;
      } else {
        section.style.transform = `translateY(${buttonIndex * -100}%)`;
      }
      setCurrentSectionIndex(buttonIndex);
      currentIndex.current = buttonIndex;
    });
  };
  useEffect(() => {
    document.body.style.overflow = "hidden";
    window.addEventListener("wheel", handleWheel);

    return () => {
      document.body.style.overflowY = "auto";
      window.removeEventListener("wheel", handleWheel);
    };
  }, []);

  useEffect(() => {
    document.body.style.overflow = "hidden";
    return () => {
      document.body.style.overflowY = "auto";
    };
  }, [modal]);

  useEffect(() => {
    setSections([
      document.querySelector(".start"),
      document.querySelector(".feature"),
      document.querySelector(".feature"),
      document.querySelector(".feature"),
      document.querySelector(".popular"),
    ]);
  }, []);

  return (
    &lt;>
      &lt;div className="home">
        &lt;section
          className={`home__section start section ${
            currentSectionIndex === 0 ? "section--active" : ""
          }`}
          ref={(el) => (sectionsRef.current[0] = el)}
        >
          &lt;Header activeLink={"hello"}>&lt;/Header>
          &lt;Start>&lt;/Start>
        &lt;/section>
        &lt;section
          className={`home__section feature section ${
            currentSectionIndex === 1 ? "section--active" : ""
          }`}
          ref={(el) => (sectionsRef.current[1] = el)}
        >
          &lt;Feature img={deliveryImg} title={"Доставка"}>&lt;/Feature>
        &lt;/section>
        &lt;section
          className={`home__section feature section ${
            currentSectionIndex === 2 ? "section--active" : ""
          }`}
          ref={(el) => (sectionsRef.current[2] = el)}
        >
          &lt;Feature img={qualityImg} title={"Качество"}>&lt;/Feature>
        &lt;/section>
        &lt;section
          className={`home__section feature section ${
            currentSectionIndex === 3 ? "section--active" : ""
          }`}
          ref={(el) => (sectionsRef.current[3] = el)}
        >
          &lt;Feature img={safeguardImg} title={"Гарантия"}>&lt;/Feature>
        &lt;/section>
        &lt;section
          className={`home__section popular section ${
            currentSectionIndex === 4 ? "section--active" : ""
          }`}
          ref={(el) => (sectionsRef.current[4] = el)}
        >
          &lt;Popular>&lt;/Popular>
        &lt;/section>

        {sectionsRef.current.length > 0 &amp;&amp; (
          &lt;div
            className={`pagination ${currentSectionIndex === 2 ? "white" : ""}`}
          >
            &lt;ul className="pagination__list">
              {sectionsRef.current.map((section, index) => (
                &lt;li className="pagination__item" key={index}>
                  &lt;button
                    className={`pagination__button ${
                      index === currentSectionIndex
                        ? "pagination__button--active"
                        : ""
                    }`}
                    onClick={() => changeSection(index)}
                  >&lt;/button>
                &lt;/li>
              ))}
            &lt;/ul>
          &lt;/div>
        )}
      &lt;/div>
    &lt;/>
  );
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Header.html">Header</a></li><li><a href="module-HelloComponent.html">HelloComponent</a></li><li><a href="module-ItemContent.html">ItemContent</a></li><li><a href="module-MainContent.html">MainContent</a></li><li><a href="module-Modal.html">Modal</a></li><li><a href="module-ProfileContent.html">ProfileContent</a></li><li><a href="module-Rating.html">Rating</a></li><li><a href="module-ReviewsContent.html">ReviewsContent</a></li></ul><h3>Global</h3><ul><li><a href="global.html#App">App</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Apr 24 2024 12:18:02 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
